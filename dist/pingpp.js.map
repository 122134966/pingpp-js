{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/callbacks.js","pingpp.js","src/channels/alipay_pc_direct.js","src/channels/alipay_wap.js","src/channels/bfb_wap.js","src/channels/commons/redirect_base.js","src/channels/cp_b2b.js","src/channels/extras/ap.js","src/channels/fqlpay_qr.js","src/channels/jdpay_wap.js","src/channels/upacp_pc.js","src/channels/upacp_wap.js","src/channels/wx_pub.js","src/channels/wx_wap.js","src/channels/yeepay_wap.js","src/collection.js","src/init.js","src/libs/md5.js","src/main.js","src/mods.js","src/stash.js","src/testmode.js","src/utils.js","src/version.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","pingpp","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","1","userCallback","undefined","innerCallback","result","err","error","msg","extra","2","utils","hasOwn","hasOwnProperty","ALIPAY_PC_DIRECT_URL","handleCharge","charge","channel","credential","baseURL","channel_url","_input_charset","query","stringifyData","redirectTo","../utils","3","mods","ALIPAY_WAP_URL_OLD","ALIPAY_WAP_URL","targetURL","ap","getExtraModule","inWeixin","pay","../mods","4","callbacks","url","../callbacks","5","../../callbacks","../../utils","6","CP_B2B_URL","formSubmit","7","stash","b","PADCHAR","ALPHA","makeDOMException","DOMException","INVALID_CHARACTER_ERR","d","c","number","name","description","toString","message","getbyte64","indexOf","charAt","decode","h","j","push","String","fromCharCode","join","getbyte","charCodeAt","encode","arguments","SyntaxError","k","encodeURIComponent","APURL","location","href","decodeURIComponent","../../stash","8","redirectBase","./commons/redirect_base","9","apply","dup","10","JDPAY_WAP_URL","11","UPACP_PC_URL","12","UPACP_WAP_URL","13","PINGPP_NOTIFY_URL_BASE","fields","jsApiParameters","callpay","wx_jssdk","jssdkEnabled","WeixinJSBridge","eventCallback","jsApiCall","document","addEventListener","attachEvent","invoke","res","err_msg","runTestMode","dopay","confirm","request","id","data","status","../stash","14","15","YEEPAY_WAP_URL","YEEPAY_WAP_TEST_URL","mode","16","md5","collection","seperator","limit","report_url","timeout","getParam","str","param","reg","RegExp","substr","match","unescape","getUserAgent","navigator","userAgent","getHost","host","store","obj","localStorage","_this","reportData","app_id","ch_id","type","user_agent","time","Date","getTime","puid","reportStr","PPP_ONE_STATS","send","split","origin","token","removeItem","X-Pingpp-Report-Token","report","setTimeout","./libs/md5","./stash","./utils","17","dc","SRC_URL","init","documentReady","initPuid","pingpp_uid","randomString","getElementById","iframe","createElement","src","style","display","body","appendChild","./collection","18","safe_add","x","y","lsw","msw","bit_rol","num","cnt","md5_cmn","q","md5_ff","md5_gg","md5_hh","md5_ii","binl_md5","len","olda","oldb","oldc","oldd","binl2rstr","input","output","rstr2binl","rstr_md5","rstr_hmac_md5","key","hash","bkey","ipad","opad","concat","rstr2hex","hex_tab","str2rstr_utf8","raw_md5","hex_md5","raw_hmac_md5","hex_hmac_md5","string","raw","19","version","v","testmode","PingppSDK","prototype","createPayment","chargeJSON","callback","signature","debug","JSON","parse","app","channelModule","getChannelModule","console","livemode","setAPURL","./callbacks","./init","./mods","./testmode","./version","20","channels","alipay_pc_direct","alipay_wap","bfb_wap","cp_b2b","fqlpay_qr","fqlpay_wap","jdpay_wap","upacp_pc","upacp_wap","wx_pub","wx_wap","yeepay_wap","extras","./channels/alipay_pc_direct","./channels/alipay_wap","./channels/bfb_wap","./channels/cp_b2b","./channels/extras/ap","./channels/fqlpay_qr","./channels/fqlpay_wap","./channels/jdpay_wap","./channels/upacp_pc","./channels/upacp_wap","./channels/wx_pub","./channels/wx_wap","./channels/yeepay_wap","21","22","PINGPP_MOCK_URL","params","scheme","order_no","orderNo","time_expire","timeExpire","stringify","23","urlencode","method","requestData","successCallback","errorCallback","headers","XMLHttpRequest","log","xhr","toUpperCase","open","setRequestHeader","onreadystatechange","readyState","responseText","onerror","form","setAttribute","hiddenField","submit","chars","maxPos","Math","floor","random","ua","toLowerCase","fn","24"],"mappings":"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","file":"pingpp.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","module.exports = {\n\n  userCallback: undefined,\n\n  innerCallback: function(result, err) {\n    if (typeof this.userCallback === 'function') {\n      if (typeof err === 'undefined') {\n        err = this.error();\n      }\n      this.userCallback(result, err);\n      this.userCallback = undefined;\n    }\n  },\n\n  error: function(msg, extra) {\n    msg = (typeof msg === 'undefined') ? '' : msg;\n    extra = (typeof extra === 'undefined') ? '' : extra;\n    return {\n      msg: msg,\n      extra: extra\n    };\n  }\n};\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.pingpp = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\nmodule.exports = {\n\n  userCallback: undefined,\n\n  innerCallback: function(result, err) {\n    if (typeof this.userCallback === 'function') {\n      if (typeof err === 'undefined') {\n        err = this.error();\n      }\n      this.userCallback(result, err);\n      this.userCallback = undefined;\n    }\n  },\n\n  error: function(msg, extra) {\n    msg = (typeof msg === 'undefined') ? '' : msg;\n    extra = (typeof extra === 'undefined') ? '' : extra;\n    return {\n      msg: msg,\n      extra: extra\n    };\n  }\n};\n\n},{}],2:[function(require,module,exports){\nvar utils = require('../utils');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  ALIPAY_PC_DIRECT_URL: 'https://mapi.alipay.com/gateway.do',\n\n  handleCharge: function(charge) {\n    var channel = charge.channel;\n    var credential = charge.credential[channel];\n    var baseURL = this.ALIPAY_PC_DIRECT_URL;\n    if (hasOwn.call(credential, 'channel_url')) {\n      baseURL = credential.channel_url;\n    }\n    if (!hasOwn.call(credential, '_input_charset')) {\n      credential._input_charset = 'utf-8';\n    }\n    var query = utils.stringifyData(credential, channel, true);\n    utils.redirectTo(baseURL + '?' + query);\n  }\n};\n\n},{\"../utils\":23}],3:[function(require,module,exports){\nvar utils = require('../utils');\nvar mods = require('../mods');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  ALIPAY_WAP_URL_OLD: 'https://wappaygw.alipay.com/service/rest.htm',\n  ALIPAY_WAP_URL: 'https://mapi.alipay.com/gateway.do',\n\n  handleCharge: function(charge) {\n    var channel = charge.channel;\n    var credential = charge.credential[channel];\n    var baseURL = this.ALIPAY_WAP_URL;\n    if (hasOwn.call(credential, 'req_data')) {\n      baseURL = this.ALIPAY_WAP_URL_OLD;\n    } else if (hasOwn.call(credential, 'channel_url')) {\n      baseURL = credential.channel_url;\n    }\n    if (!hasOwn.call(credential, '_input_charset')) {\n      credential._input_charset = 'utf-8';\n    }\n    var query = utils.stringifyData(credential, channel, true);\n    var targetURL = baseURL + '?' + query;\n    var ap = mods.getExtraModule('ap');\n    if (utils.inWeixin() && typeof ap !== 'undefined') {\n      ap.pay(targetURL);\n    } else {\n      utils.redirectTo(targetURL);\n    }\n  }\n};\n\n},{\"../mods\":20,\"../utils\":23}],4:[function(require,module,exports){\nvar utils = require('../utils');\nvar callbacks = require('../callbacks');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  handleCharge: function(charge) {\n    var channel = charge.channel;\n    var credential = charge.credential[channel];\n\n    if (!hasOwn.call(credential, 'url')) {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_credential', 'missing_field:url'));\n      return;\n    }\n    utils.redirectTo(credential.url + '?' +\n      utils.stringifyData(credential, channel));\n  }\n};\n\n},{\"../callbacks\":1,\"../utils\":23}],5:[function(require,module,exports){\nvar utils = require('../../utils');\nvar callbacks = require('../../callbacks');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    var targetURL;\n    if (typeof credential === 'string') {\n      targetURL = credential;\n    } else if (hasOwn.call(credential, 'url')) {\n      targetURL = credential.url;\n    } else {\n      callbacks.innerCallback('fail', callbacks.error('invalid_credential',\n        'credential format is incorrect'));\n      return;\n    }\n    utils.redirectTo(targetURL);\n  }\n};\n\n},{\"../../callbacks\":1,\"../../utils\":23}],6:[function(require,module,exports){\nvar utils = require('../utils');\n\nmodule.exports = {\n\n  CP_B2B_URL: 'https://payment.chinapay.com/CTITS/service/rest/page/nref/000000000017/0/0/0/0/0',\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    utils.formSubmit(this.CP_B2B_URL, 'post', credential);\n  }\n};\n\n},{\"../utils\":23}],7:[function(require,module,exports){\nvar stash = require('../../stash');\nvar hasOwn = {}.hasOwnProperty;\n\n(function() {\n  var b = {};\n  var a = {};\n  a.PADCHAR = '=';\n  a.ALPHA = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n  a.makeDOMException = function() {\n    try {\n      return new DOMException(DOMException.INVALID_CHARACTER_ERR);\n    } catch (d) {\n      var c = new Error('DOM Exception 5');\n      c.code = c.number = 5;\n      c.name = c.description = 'INVALID_CHARACTER_ERR';\n      c.toString = function() {\n        return 'Error: ' + c.name + ': ' + c.message;\n      };\n      return c;\n    }\n  };\n  a.getbyte64 = function(e, d) {\n    var c = a.ALPHA.indexOf(e.charAt(d));\n    if (c === -1) {\n      throw a.makeDOMException();\n    }\n    return c;\n  };\n  a.decode = function(f) {\n    f = '' + f;\n    var j = a.getbyte64;\n    var h, e, g;\n    var d = f.length;\n    if (d === 0) {\n      return f;\n    }\n    if (d % 4 !== 0) {\n      throw a.makeDOMException();\n    }\n    h = 0;\n    if (f.charAt(d - 1) === a.PADCHAR) {\n      h = 1;\n      if (f.charAt(d - 2) === a.PADCHAR) {\n        h = 2;\n      }\n      d -= 4;\n    }\n    var c = [];\n    for (e = 0; e < d; e += 4) {\n      g = (j(f, e) << 18) |\n        (j(f, e + 1) << 12) |\n        (j(f, e + 2) << 6) |\n        j(f, e + 3);\n      c.push(String.fromCharCode(g >> 16, (g >> 8) & 255, g & 255));\n    }\n    switch (h) {\n      case 1:\n        g = (j(f, e) << 18) | (j(f, e + 1) << 12) | (j(f, e + 2) << 6);\n        c.push(String.fromCharCode(g >> 16, (g >> 8) & 255));\n        break;\n      case 2:\n        g = (j(f, e) << 18) | (j(f, e + 1) << 12);\n        c.push(String.fromCharCode(g >> 16));\n        break;\n    }\n    return c.join('');\n  };\n  a.getbyte = function(e, d) {\n    var c = e.charCodeAt(d);\n    if (c > 255) {\n      throw a.makeDOMException();\n    }\n    return c;\n  };\n  a.encode = function(f) {\n    if (arguments.length !== 1) {\n      throw new SyntaxError('Not enough arguments');\n    }\n    var g = a.PADCHAR;\n    var h = a.ALPHA;\n    var k = a.getbyte;\n    var e, j;\n    var c = [];\n    f = '' + f;\n    var d = f.length - f.length % 3;\n    if (f.length === 0) {\n      return f;\n    }\n    for (e = 0; e < d; e += 3) {\n      j = (k(f, e) << 16) | (k(f, e + 1) << 8) | k(f, e + 2);\n      c.push(h.charAt(j >> 18));\n      c.push(h.charAt((j >> 12) & 63));\n      c.push(h.charAt((j >> 6) & 63));\n      c.push(h.charAt(j & 63));\n    }\n    switch (f.length - d) {\n      case 1:\n        j = k(f, e) << 16;\n        c.push(h.charAt(j >> 18) + h.charAt((j >> 12) & 63) + g + g);\n        break;\n      case 2:\n        j = (k(f, e) << 16) | (k(f, e + 1) << 8);\n        c.push(h.charAt(j >> 18) +\n          h.charAt((j >> 12) & 63) +\n          h.charAt((j >> 6) & 63) + g);\n        break;\n    }\n    return c.join('');\n  };\n  b.url = 'pay.htm';\n  b.pay = function(d) {\n    var c = encodeURIComponent(a.encode(d));\n    if (hasOwn.call(stash, 'APURL')) {\n      b.url = stash.APURL;\n    }\n    location.href = b.url + '?goto=' + c;\n  };\n  b.decode = function(c) {\n    return a.decode(decodeURIComponent(c));\n  };\n\n  module.exports = b;\n})();\n\n},{\"../../stash\":21}],8:[function(require,module,exports){\nvar redirectBase = require('./commons/redirect_base');\n\nmodule.exports = {\n\n  handleCharge: function(charge) {\n    redirectBase.handleCharge(charge);\n  }\n};\n\n},{\"./commons/redirect_base\":5}],9:[function(require,module,exports){\narguments[4][8][0].apply(exports,arguments)\n},{\"./commons/redirect_base\":5,\"dup\":8}],10:[function(require,module,exports){\nvar utils = require('../utils');\n\nmodule.exports = {\n\n  JDPAY_WAP_URL: 'https://m.jdpay.com/wepay/web/pay',\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    utils.formSubmit(this.JDPAY_WAP_URL, 'post', credential);\n  }\n};\n\n},{\"../utils\":23}],11:[function(require,module,exports){\nvar utils = require('../utils');\n\nmodule.exports = {\n\n  UPACP_PC_URL: 'https://gateway.95516.com/gateway/api/frontTransReq.do',\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    utils.formSubmit(this.UPACP_PC_URL, 'post', credential);\n  }\n};\n\n},{\"../utils\":23}],12:[function(require,module,exports){\nvar utils = require('../utils');\n\nmodule.exports = {\n\n  UPACP_WAP_URL: 'https://gateway.95516.com/gateway/api/frontTransReq.do',\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    utils.formSubmit(this.UPACP_WAP_URL, 'post', credential);\n  }\n};\n\n},{\"../utils\":23}],13:[function(require,module,exports){\nvar callbacks = require('../callbacks');\nvar utils = require('../utils');\nvar stash = require('../stash');\nvar mods = require('../mods');\nvar hasOwn = {}.hasOwnProperty;\n\n/*global WeixinJSBridge*/\nmodule.exports = {\n\n  PINGPP_NOTIFY_URL_BASE: 'https://api.pingxx.com/notify/charges/',\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    var fields = [\n      'appId', 'timeStamp', 'nonceStr', 'package', 'signType', 'paySign'\n    ];\n    for (var k = 0; k < fields.length; k++) {\n      if (!hasOwn.call(credential, fields[k])) {\n        callbacks.innerCallback('fail',\n          callbacks.error('invalid_credential', 'missing_field_' + fields[k]));\n        return;\n      }\n    }\n    stash.jsApiParameters = credential;\n    this.callpay();\n  },\n\n  callpay: function() {\n    var self = this;\n    var wx_jssdk = mods.getExtraModule('wx_jssdk');\n    if (typeof wx_jssdk !== 'undefined' && wx_jssdk.jssdkEnabled()) {\n      wx_jssdk.callpay();\n    } else if (typeof WeixinJSBridge == 'undefined') {\n      var eventCallback = function() {\n        self.jsApiCall();\n      };\n      if (document.addEventListener) {\n        document.addEventListener('WeixinJSBridgeReady',\n          eventCallback, false);\n      } else if (document.attachEvent) {\n        document.attachEvent('WeixinJSBridgeReady', eventCallback);\n        document.attachEvent('onWeixinJSBridgeReady', eventCallback);\n      }\n    } else {\n      this.jsApiCall();\n    }\n  },\n\n  jsApiCall: function() {\n    if (hasOwn.call(stash, 'jsApiParameters')) {\n      WeixinJSBridge.invoke(\n        'getBrandWCPayRequest',\n        stash.jsApiParameters,\n        function(res) {\n          delete stash.jsApiParameters;\n          if (res.err_msg == 'get_brand_wcpay_request:ok') {\n            callbacks.innerCallback('success');\n          } else if (res.err_msg == 'get_brand_wcpay_request:cancel') {\n            callbacks.innerCallback('cancel');\n          } else {\n            callbacks.innerCallback('fail',\n              callbacks.error('wx_result_fail', res.err_msg));\n          }\n        }\n      );\n    }\n  },\n\n  runTestMode: function(charge) {\n    var dopay = confirm('模拟付款？');\n    if (dopay) {\n      utils.request(this.PINGPP_NOTIFY_URL_BASE + charge.id + '?livemode=false',\n        'GET', null,\n        function(data, status) {\n          if (status >= 200 && status < 400 && data == 'success') {\n            callbacks.innerCallback('success');\n          } else {\n            var extra = 'http_code:' + status + ';response:' + data;\n            callbacks.innerCallback('fail',\n              callbacks.error('testmode_notify_fail', extra));\n          }\n        },\n        function() {\n          callbacks.innerCallback('fail', callbacks.error('network_err'));\n        });\n    }\n  }\n};\n\n},{\"../callbacks\":1,\"../mods\":20,\"../stash\":21,\"../utils\":23}],14:[function(require,module,exports){\nvar utils = require('../utils');\nvar callbacks = require('../callbacks');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    if (typeof credential === 'string') {\n      utils.redirectTo(credential);\n    } else if (typeof credential === 'object'\n      && hasOwn.call(credential, 'url')\n    ) {\n      utils.redirectTo(credential.url);\n    } else {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_credential', 'credential 格式不正确'));\n    }\n  }\n};\n\n},{\"../callbacks\":1,\"../utils\":23}],15:[function(require,module,exports){\nvar utils = require('../utils');\nvar callbacks = require('../callbacks');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  YEEPAY_WAP_URL: 'https://ok.yeepay.com/paymobile/api/pay/request',\n  YEEPAY_WAP_TEST_URL: 'http://mobiletest.yeepay.com/paymobile/api/pay/request',\n\n  handleCharge: function(charge) {\n    var channel = charge.channel;\n    var credential = charge.credential[channel];\n    var fields = ['merchantaccount', 'encryptkey', 'data'];\n    for (var k = 0; k < fields.length; k++) {\n      if (!hasOwn.call(credential, fields[k])) {\n        callbacks.innerCallback('fail',\n          callbacks.error('invalid_credential', 'missing_field_' + fields[k]));\n        return;\n      }\n    }\n    var baseURL;\n    if (hasOwn.call(credential, 'mode') && credential.mode == 'test') {\n      baseURL = this.YEEPAY_WAP_TEST_URL;\n    } else {\n      baseURL = this.YEEPAY_WAP_URL;\n    }\n    utils.redirectTo(baseURL + '?' +\n      utils.stringifyData(credential, channel, true));\n  }\n};\n\n},{\"../callbacks\":1,\"../utils\":23}],16:[function(require,module,exports){\nvar utils = require('./utils');\nvar stash = require('./stash');\nvar md5 = require('./libs/md5');\n\nvar collection = {\n  seperator: '###',\n  limit: 1,\n  report_url: 'https://statistics.pingxx.com/one_stats',\n  timeout: 100\n};\nvar getParam = function(str, param) {\n  var reg = new RegExp('(^|&)' + param + '=([^&]*)(&|$)', 'i');\n  var r = str.substr(0).match(reg);\n  if (r !== null) return unescape(r[2]);\n  return null;\n};\nvar getUserAgent = function() {\n  return navigator.userAgent;\n};\nvar getHost = function() {\n  return window.location.host;\n};\n\ncollection.store = function(obj) {\n  if (typeof localStorage === 'undefined') return;\n  var _this = this;\n  var reportData = {};\n  reportData.app_id = obj.app_id || stash.app_id || 'app_not_defined';\n  reportData.ch_id = obj.ch_id || '';\n  reportData.channel = obj.channel || '';\n  reportData.type = obj.type || '';\n  reportData.user_agent = getUserAgent();\n  reportData.host = getHost();\n  reportData.time = new Date().getTime();\n  reportData.puid = stash.puid;\n\n  var reportStr = 'app_id=' + reportData.app_id +\n    '&channel=' + reportData.channel + '&ch_id=' + reportData.ch_id +\n    '&host=' + reportData.host + '&time=' + reportData.time +\n    '&type=' + reportData.type + '&user_agent=' + reportData.user_agent +\n    '&puid=' + reportData.puid;\n\n  if (typeof localStorage.PPP_ONE_STATS === 'undefined' ||\n    localStorage.PPP_ONE_STATS.length === 0) {\n    localStorage.PPP_ONE_STATS = reportStr;\n  } else {\n    localStorage.PPP_ONE_STATS = localStorage.PPP_ONE_STATS +\n      _this.seperator + reportStr;\n  }\n};\n\ncollection.send = function() {\n  if (typeof localStorage === 'undefined') return;\n  var _this = this;\n  if (typeof localStorage.PPP_ONE_STATS === 'undefined' ||\n    localStorage.PPP_ONE_STATS.split(_this.seperator).length < _this.limit) {\n    return;\n  }\n  try {\n    var data = [];\n    var origin = localStorage.PPP_ONE_STATS.split(_this.seperator);\n    var token = md5(origin.join('&'));\n\n    for (var i = 0; i < origin.length; i++) {\n      data.push({\n        app_id: getParam(origin[i], 'app_id'),\n        channel: getParam(origin[i], 'channel'),\n        ch_id: getParam(origin[i], 'ch_id'),\n        host: getParam(origin[i], 'host'),\n        time: getParam(origin[i], 'time'),\n        type: getParam(origin[i], 'type'),\n        user_agent: getParam(origin[i], 'user_agent'),\n        puid: getParam(origin[i], 'puid')\n      });\n    }\n\n    utils.request(_this.report_url, 'POST', data, function(data, status) {\n      if (status == 200) {\n        localStorage.removeItem('PPP_ONE_STATS');\n      }\n    }, undefined, {\n      'X-Pingpp-Report-Token': token\n    });\n  } catch (e) {\n    /* empty */\n  }\n};\n\ncollection.report = function(obj) {\n  var _this = this;\n  _this.store(obj);\n  setTimeout(function(){\n    _this.send();\n  }, _this.timeout);\n};\n\nmodule.exports = collection;\n\n},{\"./libs/md5\":18,\"./stash\":21,\"./utils\":23}],17:[function(require,module,exports){\nvar stash = require('./stash');\nvar utils = require('./utils');\nvar dc = require('./collection');\n\nmodule.exports = {\n  SRC_URL: 'https://cookie.pingxx.com',\n\n  init: function() {\n    var self = this;\n    utils.documentReady(function(){\n      self.initPuid();\n    });\n  },\n\n  initPuid: function() {\n    if (typeof window === 'undefined' || typeof localStorage === 'undefined') {\n      return;\n    }\n    var puid;\n    if (typeof localStorage.pingpp_uid == 'undefined') {\n      puid = utils.randomString();\n      localStorage.pingpp_uid = puid;\n    } else {\n      puid = localStorage.pingpp_uid;\n    }\n    stash.puid = puid;\n    if (!document.getElementById('p_analyse_iframe')) {\n      var iframe = document.createElement('iframe');\n      iframe.id = 'p_analyse_iframe';\n      iframe.src = this.SRC_URL + '/?puid=' + puid;\n      iframe.style.display = 'none';\n      document.body.appendChild(iframe);\n    }\n    setTimeout(function() {\n      dc.send();\n    }, 0);\n  }\n};\n\n},{\"./collection\":16,\"./stash\":21,\"./utils\":23}],18:[function(require,module,exports){\n/*\n * JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * http://www.opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\n\n/* global unescape, module */\n\n(function () {\n  /*\n  * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n  * to work around bugs in some JS interpreters.\n  */\n  function safe_add (x, y) {\n    var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n    var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n    return (msw << 16) | (lsw & 0xFFFF);\n  }\n\n  /*\n  * Bitwise rotate a 32-bit number to the left.\n  */\n  function bit_rol (num, cnt) {\n    return (num << cnt) | (num >>> (32 - cnt));\n  }\n\n  /*\n  * These functions implement the four basic operations the algorithm uses.\n  */\n  function md5_cmn (q, a, b, x, s, t) {\n    return safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s), b);\n  }\n  function md5_ff (a, b, c, d, x, s, t) {\n    return md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);\n  }\n  function md5_gg (a, b, c, d, x, s, t) {\n    return md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);\n  }\n  function md5_hh (a, b, c, d, x, s, t) {\n    return md5_cmn(b ^ c ^ d, a, b, x, s, t);\n  }\n  function md5_ii (a, b, c, d, x, s, t) {\n    return md5_cmn(c ^ (b | (~d)), a, b, x, s, t);\n  }\n\n  /*\n  * Calculate the MD5 of an array of little-endian words, and a bit length.\n  */\n  function binl_md5 (x, len) {\n    /* append padding */\n    x[len >> 5] |= 0x80 << (len % 32);\n    x[(((len + 64) >>> 9) << 4) + 14] = len;\n\n    var i;\n    var olda;\n    var oldb;\n    var oldc;\n    var oldd;\n    var a = 1732584193;\n    var b = -271733879;\n    var c = -1732584194;\n    var d = 271733878;\n\n    for (i = 0; i < x.length; i += 16) {\n      olda = a;\n      oldb = b;\n      oldc = c;\n      oldd = d;\n\n      a = md5_ff(a, b, c, d, x[i], 7, -680876936);\n      d = md5_ff(d, a, b, c, x[i + 1], 12, -389564586);\n      c = md5_ff(c, d, a, b, x[i + 2], 17, 606105819);\n      b = md5_ff(b, c, d, a, x[i + 3], 22, -1044525330);\n      a = md5_ff(a, b, c, d, x[i + 4], 7, -176418897);\n      d = md5_ff(d, a, b, c, x[i + 5], 12, 1200080426);\n      c = md5_ff(c, d, a, b, x[i + 6], 17, -1473231341);\n      b = md5_ff(b, c, d, a, x[i + 7], 22, -45705983);\n      a = md5_ff(a, b, c, d, x[i + 8], 7, 1770035416);\n      d = md5_ff(d, a, b, c, x[i + 9], 12, -1958414417);\n      c = md5_ff(c, d, a, b, x[i + 10], 17, -42063);\n      b = md5_ff(b, c, d, a, x[i + 11], 22, -1990404162);\n      a = md5_ff(a, b, c, d, x[i + 12], 7, 1804603682);\n      d = md5_ff(d, a, b, c, x[i + 13], 12, -40341101);\n      c = md5_ff(c, d, a, b, x[i + 14], 17, -1502002290);\n      b = md5_ff(b, c, d, a, x[i + 15], 22, 1236535329);\n\n      a = md5_gg(a, b, c, d, x[i + 1], 5, -165796510);\n      d = md5_gg(d, a, b, c, x[i + 6], 9, -1069501632);\n      c = md5_gg(c, d, a, b, x[i + 11], 14, 643717713);\n      b = md5_gg(b, c, d, a, x[i], 20, -373897302);\n      a = md5_gg(a, b, c, d, x[i + 5], 5, -701558691);\n      d = md5_gg(d, a, b, c, x[i + 10], 9, 38016083);\n      c = md5_gg(c, d, a, b, x[i + 15], 14, -660478335);\n      b = md5_gg(b, c, d, a, x[i + 4], 20, -405537848);\n      a = md5_gg(a, b, c, d, x[i + 9], 5, 568446438);\n      d = md5_gg(d, a, b, c, x[i + 14], 9, -1019803690);\n      c = md5_gg(c, d, a, b, x[i + 3], 14, -187363961);\n      b = md5_gg(b, c, d, a, x[i + 8], 20, 1163531501);\n      a = md5_gg(a, b, c, d, x[i + 13], 5, -1444681467);\n      d = md5_gg(d, a, b, c, x[i + 2], 9, -51403784);\n      c = md5_gg(c, d, a, b, x[i + 7], 14, 1735328473);\n      b = md5_gg(b, c, d, a, x[i + 12], 20, -1926607734);\n\n      a = md5_hh(a, b, c, d, x[i + 5], 4, -378558);\n      d = md5_hh(d, a, b, c, x[i + 8], 11, -2022574463);\n      c = md5_hh(c, d, a, b, x[i + 11], 16, 1839030562);\n      b = md5_hh(b, c, d, a, x[i + 14], 23, -35309556);\n      a = md5_hh(a, b, c, d, x[i + 1], 4, -1530992060);\n      d = md5_hh(d, a, b, c, x[i + 4], 11, 1272893353);\n      c = md5_hh(c, d, a, b, x[i + 7], 16, -155497632);\n      b = md5_hh(b, c, d, a, x[i + 10], 23, -1094730640);\n      a = md5_hh(a, b, c, d, x[i + 13], 4, 681279174);\n      d = md5_hh(d, a, b, c, x[i], 11, -358537222);\n      c = md5_hh(c, d, a, b, x[i + 3], 16, -722521979);\n      b = md5_hh(b, c, d, a, x[i + 6], 23, 76029189);\n      a = md5_hh(a, b, c, d, x[i + 9], 4, -640364487);\n      d = md5_hh(d, a, b, c, x[i + 12], 11, -421815835);\n      c = md5_hh(c, d, a, b, x[i + 15], 16, 530742520);\n      b = md5_hh(b, c, d, a, x[i + 2], 23, -995338651);\n\n      a = md5_ii(a, b, c, d, x[i], 6, -198630844);\n      d = md5_ii(d, a, b, c, x[i + 7], 10, 1126891415);\n      c = md5_ii(c, d, a, b, x[i + 14], 15, -1416354905);\n      b = md5_ii(b, c, d, a, x[i + 5], 21, -57434055);\n      a = md5_ii(a, b, c, d, x[i + 12], 6, 1700485571);\n      d = md5_ii(d, a, b, c, x[i + 3], 10, -1894986606);\n      c = md5_ii(c, d, a, b, x[i + 10], 15, -1051523);\n      b = md5_ii(b, c, d, a, x[i + 1], 21, -2054922799);\n      a = md5_ii(a, b, c, d, x[i + 8], 6, 1873313359);\n      d = md5_ii(d, a, b, c, x[i + 15], 10, -30611744);\n      c = md5_ii(c, d, a, b, x[i + 6], 15, -1560198380);\n      b = md5_ii(b, c, d, a, x[i + 13], 21, 1309151649);\n      a = md5_ii(a, b, c, d, x[i + 4], 6, -145523070);\n      d = md5_ii(d, a, b, c, x[i + 11], 10, -1120210379);\n      c = md5_ii(c, d, a, b, x[i + 2], 15, 718787259);\n      b = md5_ii(b, c, d, a, x[i + 9], 21, -343485551);\n\n      a = safe_add(a, olda);\n      b = safe_add(b, oldb);\n      c = safe_add(c, oldc);\n      d = safe_add(d, oldd);\n    }\n    return [a, b, c, d];\n  }\n\n  /*\n  * Convert an array of little-endian words to a string\n  */\n  function binl2rstr (input) {\n    var i;\n    var output = '';\n    for (i = 0; i < input.length * 32; i += 8) {\n      output += String.fromCharCode((input[i >> 5] >>> (i % 32)) & 0xFF);\n    }\n    return output;\n  }\n\n  /*\n  * Convert a raw string to an array of little-endian words\n  * Characters >255 have their high-byte silently ignored.\n  */\n  function rstr2binl (input) {\n    var i;\n    var output = [];\n    output[(input.length >> 2) - 1] = undefined;\n    for (i = 0; i < output.length; i += 1) {\n      output[i] = 0;\n    }\n    for (i = 0; i < input.length * 8; i += 8) {\n      output[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << (i % 32);\n    }\n    return output;\n  }\n\n  /*\n  * Calculate the MD5 of a raw string\n  */\n  function rstr_md5 (s) {\n    return binl2rstr(binl_md5(rstr2binl(s), s.length * 8));\n  }\n\n  /*\n  * Calculate the HMAC-MD5, of a key and some data (raw strings)\n  */\n  function rstr_hmac_md5 (key, data) {\n    var i;\n    var bkey = rstr2binl(key);\n    var ipad = [];\n    var opad = [];\n    var hash;\n    ipad[15] = opad[15] = undefined;\n    if (bkey.length > 16) {\n      bkey = binl_md5(bkey, key.length * 8);\n    }\n    for (i = 0; i < 16; i += 1) {\n      ipad[i] = bkey[i] ^ 0x36363636;\n      opad[i] = bkey[i] ^ 0x5C5C5C5C;\n    }\n    hash = binl_md5(ipad.concat(rstr2binl(data)), 512 + data.length * 8);\n    return binl2rstr(binl_md5(opad.concat(hash), 512 + 128));\n  }\n\n  /*\n  * Convert a raw string to a hex string\n  */\n  function rstr2hex (input) {\n    var hex_tab = '0123456789abcdef';\n    var output = '';\n    var x;\n    var i;\n    for (i = 0; i < input.length; i += 1) {\n      x = input.charCodeAt(i);\n      output += hex_tab.charAt((x >>> 4) & 0x0F) +\n      hex_tab.charAt(x & 0x0F);\n    }\n    return output;\n  }\n\n  /*\n  * Encode a string as utf-8\n  */\n  function str2rstr_utf8 (input) {\n    return unescape(encodeURIComponent(input));\n  }\n\n  /*\n  * Take string arguments and return either raw or hex encoded strings\n  */\n  function raw_md5 (s) {\n    return rstr_md5(str2rstr_utf8(s));\n  }\n  function hex_md5 (s) {\n    return rstr2hex(raw_md5(s));\n  }\n  function raw_hmac_md5 (k, d) {\n    return rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d));\n  }\n  function hex_hmac_md5 (k, d) {\n    return rstr2hex(raw_hmac_md5(k, d));\n  }\n\n  function md5 (string, key, raw) {\n    if (!key) {\n      if (!raw) {\n        return hex_md5(string);\n      }\n      return raw_md5(string);\n    }\n    if (!raw) {\n      return hex_hmac_md5(key, string);\n    }\n    return raw_hmac_md5(key, string);\n  }\n\n  module.exports = md5;\n}());\n\n},{}],19:[function(require,module,exports){\nvar version = require('./version').v;\nvar testmode = require('./testmode');\nvar callbacks = require('./callbacks');\nvar mods = require('./mods');\nvar stash = require('./stash');\nvar dc = require('./collection');\n\nvar hasOwn = {}.hasOwnProperty;\nvar PingppSDK = function() {\n  require('./init').init();\n};\n\nPingppSDK.prototype = {\n\n  version: version,\n\n  createPayment: function(chargeJSON, callback, signature, debug) {\n    if (typeof callback === 'function') {\n      callbacks.userCallback = callback;\n    }\n    var charge;\n    if (typeof chargeJSON === 'string') {\n      try {\n        charge = JSON.parse(chargeJSON);\n      } catch (err) {\n        callbacks.innerCallback('fail',\n          callbacks.error('json_decode_fail', err));\n        return;\n      }\n    } else {\n      charge = chargeJSON;\n    }\n    if (typeof charge === 'undefined') {\n      callbacks.innerCallback('fail', callbacks.error('json_decode_fail'));\n      return;\n    }\n    if (!hasOwn.call(charge, 'id')) {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_charge', 'no_charge_id'));\n      return;\n    }\n    if (!hasOwn.call(charge, 'channel')) {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_charge', 'no_channel'));\n      return;\n    }\n    if (hasOwn.call(charge, 'app')) {\n      if (typeof charge.app === 'string') {\n        stash.app_id = charge.app;\n      } else if (typeof charge.app === 'object' &&\n        typeof charge.app.id === 'string') {\n        stash.app_id = charge.app.id;\n      }\n    }\n    dc.report({\n      type: 'pure_sdk_click',\n      channel: charge.channel,\n      ch_id: charge.id\n    });\n    var channel = charge.channel;\n    if (!hasOwn.call(charge, 'credential')) {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_charge', 'no_credential'));\n      return;\n    }\n    if (!charge.credential) {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_credential', 'credential_is_undefined'));\n      return;\n    }\n    if (!hasOwn.call(charge.credential, channel)) {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_credential', 'credential_is_incorrect'));\n      return;\n    }\n    if (!hasOwn.call(charge, 'livemode')) {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_charge', 'no_livemode_field'));\n      return;\n    }\n    var channelModule = mods.getChannelModule(channel);\n    if (typeof channelModule === 'undefined') {\n      console.error('channel module \"' + channel + '\" is undefined');\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_channel',\n          'channel module \"' + channel + '\" is undefined')\n      );\n      return;\n    }\n    if (charge.livemode === false) {\n      if (hasOwn.call(channelModule, 'runTestMode')) {\n        channelModule.runTestMode(charge);\n      } else {\n        testmode.runTestMode(charge);\n      }\n      return;\n    }\n\n    if (typeof signature != 'undefined') {\n      stash.signature = signature;\n    }\n    if (typeof debug == 'boolean') {\n      stash.debug = debug;\n    }\n    channelModule.handleCharge(charge);\n  },\n\n  setAPURL: function(url) {\n    stash.APURL = url;\n  }\n};\n\nmodule.exports = new PingppSDK();\n\n},{\"./callbacks\":1,\"./collection\":16,\"./init\":17,\"./mods\":20,\"./stash\":21,\"./testmode\":22,\"./version\":24}],20:[function(require,module,exports){\nvar hasOwn = {}.hasOwnProperty;\nvar mods = {};\nmodule.exports = mods;\n\nmods.channels = {\n  alipay_pc_direct: require('./channels/alipay_pc_direct'),\n  alipay_wap: require('./channels/alipay_wap'),\n  bfb_wap: require('./channels/bfb_wap'),\n  cp_b2b: require('./channels/cp_b2b'),\n  fqlpay_qr: require('./channels/fqlpay_qr'),\n  fqlpay_wap: require('./channels/fqlpay_wap'),\n  jdpay_wap: require('./channels/jdpay_wap'),\n  upacp_pc: require('./channels/upacp_pc'),\n  upacp_wap: require('./channels/upacp_wap'),\n  wx_pub: require('./channels/wx_pub'),\n  wx_wap: require('./channels/wx_wap'),\n  yeepay_wap: require('./channels/yeepay_wap')\n};\n\nmods.extras = {\n  ap: require('./channels/extras/ap')\n};\n\nmods.getChannelModule = function(channel) {\n  if (hasOwn.call(mods.channels, channel)) {\n    return mods.channels[channel];\n  }\n  return undefined;\n};\n\nmods.getExtraModule = function(name) {\n  if (hasOwn.call(mods.extras, name)) {\n    return mods.extras[name];\n  }\n  return undefined;\n};\n\n},{\"./channels/alipay_pc_direct\":2,\"./channels/alipay_wap\":3,\"./channels/bfb_wap\":4,\"./channels/cp_b2b\":6,\"./channels/extras/ap\":7,\"./channels/fqlpay_qr\":8,\"./channels/fqlpay_wap\":9,\"./channels/jdpay_wap\":10,\"./channels/upacp_pc\":11,\"./channels/upacp_wap\":12,\"./channels/wx_pub\":13,\"./channels/wx_wap\":14,\"./channels/yeepay_wap\":15}],21:[function(require,module,exports){\nmodule.exports = {\n};\n\n},{}],22:[function(require,module,exports){\nvar utils = require('./utils');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  PINGPP_MOCK_URL: 'http://sissi.pingxx.com/mock.php',\n\n  runTestMode: function(charge) {\n    var params = {\n      'ch_id': charge.id,\n      'scheme': 'http',\n      'channel': charge.channel\n    };\n    if (hasOwn.call(charge, 'order_no')) {\n      params.order_no = charge.order_no;\n    } else if (hasOwn.call(charge, 'orderNo')) {\n      params.order_no = charge.orderNo;\n    }\n    if (hasOwn.call(charge, 'time_expire')) {\n      params.time_expire = charge.time_expire;\n    } else if (hasOwn.call(charge, 'timeExpire')) {\n      params.time_expire = charge.timeExpire;\n    }\n    if (hasOwn.call(charge, 'extra')) {\n      params.extra = encodeURIComponent(JSON.stringify(charge.extra));\n    }\n    utils.redirectTo(this.PINGPP_MOCK_URL + '?' + utils.stringifyData(params));\n  }\n};\n\n},{\"./utils\":23}],23:[function(require,module,exports){\nvar hasOwn = {}.hasOwnProperty;\n\nvar utils = module.exports = {\n\n  /**\n   * 对象转换成 query string\n   * @param object data  待转对象\n   * @param string channel  渠道\n   * @param boolean urlencode  是否需要 urlencode\n   *\n   * @return string query string\n   */\n  stringifyData: function(data, channel, urlencode) {\n    if (typeof urlencode == 'undefined') {\n      urlencode = false;\n    }\n    var output = [];\n    for (var i in data) {\n      if (!hasOwn.call(data, i) || typeof data[i] === 'function') {\n        continue;\n      }\n      if (channel == 'bfb_wap' && i == 'url') {\n        continue;\n      }\n      if (channel == 'yeepay_wap' && i == 'mode') {\n        continue;\n      }\n      if (i == 'channel_url') {\n        continue;\n      }\n      output.push(i + '=' +\n        (urlencode ? encodeURIComponent(data[i]) : data[i]));\n    }\n    return output.join('&');\n  },\n\n  /**\n   * 网络请求\n   * @param string url\n   * @param string method  请求方式, POST, GET ...\n   * @param object requestData  请求数据\n   * @param function successCallback  成功回调 (data, statusCode, xhr)\n   * @param function errorCallback  错误回调 (xhr, statusCode, error)\n   */\n  request: function(url, method, requestData,\n    successCallback, errorCallback, headers) {\n    if (typeof XMLHttpRequest !== 'function') {\n      console.log('Function XMLHttpRequest is undefined.');\n      return;\n    }\n    var xhr = new XMLHttpRequest();\n    if (typeof xhr.timeout !== 'undefined') {\n      xhr.timeout = 6000;\n    }\n    method = method.toUpperCase();\n\n    if (method === 'GET' && typeof requestData === 'object' && requestData) {\n      url += '?' + utils.stringifyData(requestData, '', true);\n    }\n    xhr.open(method, url, true);\n    if (typeof headers !== 'undefined') {\n      for (var k in headers) {\n        if (hasOwn.call(headers, k)) {\n          xhr.setRequestHeader(k, headers[k]);\n        }\n      }\n    }\n    if (method === 'POST') {\n      xhr.setRequestHeader('Content-type', 'application/json; charset=utf-8');\n      xhr.send(JSON.stringify(requestData));\n    } else {\n      xhr.send();\n    }\n    if (typeof successCallback == 'undefined') {\n      successCallback = function() {};\n    }\n    if (typeof errorCallback == 'undefined') {\n      errorCallback = function() {};\n    }\n    xhr.onreadystatechange = function() {\n      if (xhr.readyState == 4) {\n        successCallback(xhr.responseText, xhr.status, xhr);\n      }\n    };\n    xhr.onerror = function(e) {\n      errorCallback(xhr, 0, e);\n    };\n  },\n\n  /**\n   * 表单提交\n   * @param string url\n   * @param string method  请求方式, POST, GET ...\n   * @param object params  请求数据\n   */\n  formSubmit: function(url, method, params) {\n    if (typeof window === 'undefined') {\n      console.log('Not a browser, form submit url: ' + url);\n      return;\n    }\n    var form = document.createElement('form');\n    form.setAttribute('method', method);\n    form.setAttribute('action', url);\n\n    for (var key in params) {\n      if (hasOwn.call(params, key)) {\n        var hiddenField = document.createElement('input');\n        hiddenField.setAttribute('type', 'hidden');\n        hiddenField.setAttribute('name', key);\n        hiddenField.setAttribute('value', params[key]);\n        form.appendChild(hiddenField);\n      }\n    }\n\n    document.body.appendChild(form);\n    form.submit();\n  },\n\n  randomString: function(length) {\n    if (typeof length == 'undefined') {\n      length = 32;\n    }\n    var chars =\n      'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    var maxPos = chars.length;\n    var str = '';\n    for (var i = 0; i < length; i++) {\n      str += chars.charAt(Math.floor(Math.random() * maxPos));\n    }\n\n    return str;\n  },\n\n  redirectTo: function(url) {\n    if (typeof window === 'undefined') {\n      console.log('Not a browser, redirect url: ' + url);\n      return;\n    }\n    window.location.href = url;\n  },\n\n  inWeixin: function() {\n    if (typeof navigator === 'undefined') {\n      return false;\n    }\n    var ua = navigator.userAgent.toLowerCase();\n    return ua.indexOf('micromessenger') !== -1;\n  },\n\n  documentReady: function(fn) {\n    if (typeof document === 'undefined') {\n      fn();\n      return;\n    }\n    if (document.readyState != 'loading'){\n      fn();\n    } else {\n      document.addEventListener('DOMContentLoaded', fn);\n    }\n  }\n};\n\n},{}],24:[function(require,module,exports){\nmodule.exports = {\n  v: '2.1.2'\n};\n\n},{}]},{},[19])(19)\n});\n\n","var utils = require('../utils');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  ALIPAY_PC_DIRECT_URL: 'https://mapi.alipay.com/gateway.do',\n\n  handleCharge: function(charge) {\n    var channel = charge.channel;\n    var credential = charge.credential[channel];\n    var baseURL = this.ALIPAY_PC_DIRECT_URL;\n    if (hasOwn.call(credential, 'channel_url')) {\n      baseURL = credential.channel_url;\n    }\n    if (!hasOwn.call(credential, '_input_charset')) {\n      credential._input_charset = 'utf-8';\n    }\n    var query = utils.stringifyData(credential, channel, true);\n    utils.redirectTo(baseURL + '?' + query);\n  }\n};\n","var utils = require('../utils');\nvar mods = require('../mods');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  ALIPAY_WAP_URL_OLD: 'https://wappaygw.alipay.com/service/rest.htm',\n  ALIPAY_WAP_URL: 'https://mapi.alipay.com/gateway.do',\n\n  handleCharge: function(charge) {\n    var channel = charge.channel;\n    var credential = charge.credential[channel];\n    var baseURL = this.ALIPAY_WAP_URL;\n    if (hasOwn.call(credential, 'req_data')) {\n      baseURL = this.ALIPAY_WAP_URL_OLD;\n    } else if (hasOwn.call(credential, 'channel_url')) {\n      baseURL = credential.channel_url;\n    }\n    if (!hasOwn.call(credential, '_input_charset')) {\n      credential._input_charset = 'utf-8';\n    }\n    var query = utils.stringifyData(credential, channel, true);\n    var targetURL = baseURL + '?' + query;\n    var ap = mods.getExtraModule('ap');\n    if (utils.inWeixin() && typeof ap !== 'undefined') {\n      ap.pay(targetURL);\n    } else {\n      utils.redirectTo(targetURL);\n    }\n  }\n};\n","var utils = require('../utils');\nvar callbacks = require('../callbacks');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  handleCharge: function(charge) {\n    var channel = charge.channel;\n    var credential = charge.credential[channel];\n\n    if (!hasOwn.call(credential, 'url')) {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_credential', 'missing_field:url'));\n      return;\n    }\n    utils.redirectTo(credential.url + '?' +\n      utils.stringifyData(credential, channel));\n  }\n};\n","var utils = require('../../utils');\nvar callbacks = require('../../callbacks');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    var targetURL;\n    if (typeof credential === 'string') {\n      targetURL = credential;\n    } else if (hasOwn.call(credential, 'url')) {\n      targetURL = credential.url;\n    } else {\n      callbacks.innerCallback('fail', callbacks.error('invalid_credential',\n        'credential format is incorrect'));\n      return;\n    }\n    utils.redirectTo(targetURL);\n  }\n};\n","var utils = require('../utils');\n\nmodule.exports = {\n\n  CP_B2B_URL: 'https://payment.chinapay.com/CTITS/service/rest/page/nref/000000000017/0/0/0/0/0',\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    utils.formSubmit(this.CP_B2B_URL, 'post', credential);\n  }\n};\n","var stash = require('../../stash');\nvar hasOwn = {}.hasOwnProperty;\n\n(function() {\n  var b = {};\n  var a = {};\n  a.PADCHAR = '=';\n  a.ALPHA = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/';\n  a.makeDOMException = function() {\n    try {\n      return new DOMException(DOMException.INVALID_CHARACTER_ERR);\n    } catch (d) {\n      var c = new Error('DOM Exception 5');\n      c.code = c.number = 5;\n      c.name = c.description = 'INVALID_CHARACTER_ERR';\n      c.toString = function() {\n        return 'Error: ' + c.name + ': ' + c.message;\n      };\n      return c;\n    }\n  };\n  a.getbyte64 = function(e, d) {\n    var c = a.ALPHA.indexOf(e.charAt(d));\n    if (c === -1) {\n      throw a.makeDOMException();\n    }\n    return c;\n  };\n  a.decode = function(f) {\n    f = '' + f;\n    var j = a.getbyte64;\n    var h, e, g;\n    var d = f.length;\n    if (d === 0) {\n      return f;\n    }\n    if (d % 4 !== 0) {\n      throw a.makeDOMException();\n    }\n    h = 0;\n    if (f.charAt(d - 1) === a.PADCHAR) {\n      h = 1;\n      if (f.charAt(d - 2) === a.PADCHAR) {\n        h = 2;\n      }\n      d -= 4;\n    }\n    var c = [];\n    for (e = 0; e < d; e += 4) {\n      g = (j(f, e) << 18) |\n        (j(f, e + 1) << 12) |\n        (j(f, e + 2) << 6) |\n        j(f, e + 3);\n      c.push(String.fromCharCode(g >> 16, (g >> 8) & 255, g & 255));\n    }\n    switch (h) {\n      case 1:\n        g = (j(f, e) << 18) | (j(f, e + 1) << 12) | (j(f, e + 2) << 6);\n        c.push(String.fromCharCode(g >> 16, (g >> 8) & 255));\n        break;\n      case 2:\n        g = (j(f, e) << 18) | (j(f, e + 1) << 12);\n        c.push(String.fromCharCode(g >> 16));\n        break;\n    }\n    return c.join('');\n  };\n  a.getbyte = function(e, d) {\n    var c = e.charCodeAt(d);\n    if (c > 255) {\n      throw a.makeDOMException();\n    }\n    return c;\n  };\n  a.encode = function(f) {\n    if (arguments.length !== 1) {\n      throw new SyntaxError('Not enough arguments');\n    }\n    var g = a.PADCHAR;\n    var h = a.ALPHA;\n    var k = a.getbyte;\n    var e, j;\n    var c = [];\n    f = '' + f;\n    var d = f.length - f.length % 3;\n    if (f.length === 0) {\n      return f;\n    }\n    for (e = 0; e < d; e += 3) {\n      j = (k(f, e) << 16) | (k(f, e + 1) << 8) | k(f, e + 2);\n      c.push(h.charAt(j >> 18));\n      c.push(h.charAt((j >> 12) & 63));\n      c.push(h.charAt((j >> 6) & 63));\n      c.push(h.charAt(j & 63));\n    }\n    switch (f.length - d) {\n      case 1:\n        j = k(f, e) << 16;\n        c.push(h.charAt(j >> 18) + h.charAt((j >> 12) & 63) + g + g);\n        break;\n      case 2:\n        j = (k(f, e) << 16) | (k(f, e + 1) << 8);\n        c.push(h.charAt(j >> 18) +\n          h.charAt((j >> 12) & 63) +\n          h.charAt((j >> 6) & 63) + g);\n        break;\n    }\n    return c.join('');\n  };\n  b.url = 'pay.htm';\n  b.pay = function(d) {\n    var c = encodeURIComponent(a.encode(d));\n    if (hasOwn.call(stash, 'APURL')) {\n      b.url = stash.APURL;\n    }\n    location.href = b.url + '?goto=' + c;\n  };\n  b.decode = function(c) {\n    return a.decode(decodeURIComponent(c));\n  };\n\n  module.exports = b;\n})();\n","var redirectBase = require('./commons/redirect_base');\n\nmodule.exports = {\n\n  handleCharge: function(charge) {\n    redirectBase.handleCharge(charge);\n  }\n};\n","var utils = require('../utils');\n\nmodule.exports = {\n\n  JDPAY_WAP_URL: 'https://m.jdpay.com/wepay/web/pay',\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    utils.formSubmit(this.JDPAY_WAP_URL, 'post', credential);\n  }\n};\n","var utils = require('../utils');\n\nmodule.exports = {\n\n  UPACP_PC_URL: 'https://gateway.95516.com/gateway/api/frontTransReq.do',\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    utils.formSubmit(this.UPACP_PC_URL, 'post', credential);\n  }\n};\n","var utils = require('../utils');\n\nmodule.exports = {\n\n  UPACP_WAP_URL: 'https://gateway.95516.com/gateway/api/frontTransReq.do',\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    utils.formSubmit(this.UPACP_WAP_URL, 'post', credential);\n  }\n};\n","var callbacks = require('../callbacks');\nvar utils = require('../utils');\nvar stash = require('../stash');\nvar mods = require('../mods');\nvar hasOwn = {}.hasOwnProperty;\n\n/*global WeixinJSBridge*/\nmodule.exports = {\n\n  PINGPP_NOTIFY_URL_BASE: 'https://api.pingxx.com/notify/charges/',\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    var fields = [\n      'appId', 'timeStamp', 'nonceStr', 'package', 'signType', 'paySign'\n    ];\n    for (var k = 0; k < fields.length; k++) {\n      if (!hasOwn.call(credential, fields[k])) {\n        callbacks.innerCallback('fail',\n          callbacks.error('invalid_credential', 'missing_field_' + fields[k]));\n        return;\n      }\n    }\n    stash.jsApiParameters = credential;\n    this.callpay();\n  },\n\n  callpay: function() {\n    var self = this;\n    var wx_jssdk = mods.getExtraModule('wx_jssdk');\n    if (typeof wx_jssdk !== 'undefined' && wx_jssdk.jssdkEnabled()) {\n      wx_jssdk.callpay();\n    } else if (typeof WeixinJSBridge == 'undefined') {\n      var eventCallback = function() {\n        self.jsApiCall();\n      };\n      if (document.addEventListener) {\n        document.addEventListener('WeixinJSBridgeReady',\n          eventCallback, false);\n      } else if (document.attachEvent) {\n        document.attachEvent('WeixinJSBridgeReady', eventCallback);\n        document.attachEvent('onWeixinJSBridgeReady', eventCallback);\n      }\n    } else {\n      this.jsApiCall();\n    }\n  },\n\n  jsApiCall: function() {\n    if (hasOwn.call(stash, 'jsApiParameters')) {\n      WeixinJSBridge.invoke(\n        'getBrandWCPayRequest',\n        stash.jsApiParameters,\n        function(res) {\n          delete stash.jsApiParameters;\n          if (res.err_msg == 'get_brand_wcpay_request:ok') {\n            callbacks.innerCallback('success');\n          } else if (res.err_msg == 'get_brand_wcpay_request:cancel') {\n            callbacks.innerCallback('cancel');\n          } else {\n            callbacks.innerCallback('fail',\n              callbacks.error('wx_result_fail', res.err_msg));\n          }\n        }\n      );\n    }\n  },\n\n  runTestMode: function(charge) {\n    var dopay = confirm('模拟付款？');\n    if (dopay) {\n      utils.request(this.PINGPP_NOTIFY_URL_BASE + charge.id + '?livemode=false',\n        'GET', null,\n        function(data, status) {\n          if (status >= 200 && status < 400 && data == 'success') {\n            callbacks.innerCallback('success');\n          } else {\n            var extra = 'http_code:' + status + ';response:' + data;\n            callbacks.innerCallback('fail',\n              callbacks.error('testmode_notify_fail', extra));\n          }\n        },\n        function() {\n          callbacks.innerCallback('fail', callbacks.error('network_err'));\n        });\n    }\n  }\n};\n","var utils = require('../utils');\nvar callbacks = require('../callbacks');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  handleCharge: function(charge) {\n    var credential = charge.credential[charge.channel];\n    if (typeof credential === 'string') {\n      utils.redirectTo(credential);\n    } else if (typeof credential === 'object'\n      && hasOwn.call(credential, 'url')\n    ) {\n      utils.redirectTo(credential.url);\n    } else {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_credential', 'credential 格式不正确'));\n    }\n  }\n};\n","var utils = require('../utils');\nvar callbacks = require('../callbacks');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  YEEPAY_WAP_URL: 'https://ok.yeepay.com/paymobile/api/pay/request',\n  YEEPAY_WAP_TEST_URL: 'http://mobiletest.yeepay.com/paymobile/api/pay/request',\n\n  handleCharge: function(charge) {\n    var channel = charge.channel;\n    var credential = charge.credential[channel];\n    var fields = ['merchantaccount', 'encryptkey', 'data'];\n    for (var k = 0; k < fields.length; k++) {\n      if (!hasOwn.call(credential, fields[k])) {\n        callbacks.innerCallback('fail',\n          callbacks.error('invalid_credential', 'missing_field_' + fields[k]));\n        return;\n      }\n    }\n    var baseURL;\n    if (hasOwn.call(credential, 'mode') && credential.mode == 'test') {\n      baseURL = this.YEEPAY_WAP_TEST_URL;\n    } else {\n      baseURL = this.YEEPAY_WAP_URL;\n    }\n    utils.redirectTo(baseURL + '?' +\n      utils.stringifyData(credential, channel, true));\n  }\n};\n","var utils = require('./utils');\nvar stash = require('./stash');\nvar md5 = require('./libs/md5');\n\nvar collection = {\n  seperator: '###',\n  limit: 1,\n  report_url: 'https://statistics.pingxx.com/one_stats',\n  timeout: 100\n};\nvar getParam = function(str, param) {\n  var reg = new RegExp('(^|&)' + param + '=([^&]*)(&|$)', 'i');\n  var r = str.substr(0).match(reg);\n  if (r !== null) return unescape(r[2]);\n  return null;\n};\nvar getUserAgent = function() {\n  return navigator.userAgent;\n};\nvar getHost = function() {\n  return window.location.host;\n};\n\ncollection.store = function(obj) {\n  if (typeof localStorage === 'undefined') return;\n  var _this = this;\n  var reportData = {};\n  reportData.app_id = obj.app_id || stash.app_id || 'app_not_defined';\n  reportData.ch_id = obj.ch_id || '';\n  reportData.channel = obj.channel || '';\n  reportData.type = obj.type || '';\n  reportData.user_agent = getUserAgent();\n  reportData.host = getHost();\n  reportData.time = new Date().getTime();\n  reportData.puid = stash.puid;\n\n  var reportStr = 'app_id=' + reportData.app_id +\n    '&channel=' + reportData.channel + '&ch_id=' + reportData.ch_id +\n    '&host=' + reportData.host + '&time=' + reportData.time +\n    '&type=' + reportData.type + '&user_agent=' + reportData.user_agent +\n    '&puid=' + reportData.puid;\n\n  if (typeof localStorage.PPP_ONE_STATS === 'undefined' ||\n    localStorage.PPP_ONE_STATS.length === 0) {\n    localStorage.PPP_ONE_STATS = reportStr;\n  } else {\n    localStorage.PPP_ONE_STATS = localStorage.PPP_ONE_STATS +\n      _this.seperator + reportStr;\n  }\n};\n\ncollection.send = function() {\n  if (typeof localStorage === 'undefined') return;\n  var _this = this;\n  if (typeof localStorage.PPP_ONE_STATS === 'undefined' ||\n    localStorage.PPP_ONE_STATS.split(_this.seperator).length < _this.limit) {\n    return;\n  }\n  try {\n    var data = [];\n    var origin = localStorage.PPP_ONE_STATS.split(_this.seperator);\n    var token = md5(origin.join('&'));\n\n    for (var i = 0; i < origin.length; i++) {\n      data.push({\n        app_id: getParam(origin[i], 'app_id'),\n        channel: getParam(origin[i], 'channel'),\n        ch_id: getParam(origin[i], 'ch_id'),\n        host: getParam(origin[i], 'host'),\n        time: getParam(origin[i], 'time'),\n        type: getParam(origin[i], 'type'),\n        user_agent: getParam(origin[i], 'user_agent'),\n        puid: getParam(origin[i], 'puid')\n      });\n    }\n\n    utils.request(_this.report_url, 'POST', data, function(data, status) {\n      if (status == 200) {\n        localStorage.removeItem('PPP_ONE_STATS');\n      }\n    }, undefined, {\n      'X-Pingpp-Report-Token': token\n    });\n  } catch (e) {\n    /* empty */\n  }\n};\n\ncollection.report = function(obj) {\n  var _this = this;\n  _this.store(obj);\n  setTimeout(function(){\n    _this.send();\n  }, _this.timeout);\n};\n\nmodule.exports = collection;\n","var stash = require('./stash');\nvar utils = require('./utils');\nvar dc = require('./collection');\n\nmodule.exports = {\n  SRC_URL: 'https://cookie.pingxx.com',\n\n  init: function() {\n    var self = this;\n    utils.documentReady(function(){\n      self.initPuid();\n    });\n  },\n\n  initPuid: function() {\n    if (typeof window === 'undefined' || typeof localStorage === 'undefined') {\n      return;\n    }\n    var puid;\n    if (typeof localStorage.pingpp_uid == 'undefined') {\n      puid = utils.randomString();\n      localStorage.pingpp_uid = puid;\n    } else {\n      puid = localStorage.pingpp_uid;\n    }\n    stash.puid = puid;\n    if (!document.getElementById('p_analyse_iframe')) {\n      var iframe = document.createElement('iframe');\n      iframe.id = 'p_analyse_iframe';\n      iframe.src = this.SRC_URL + '/?puid=' + puid;\n      iframe.style.display = 'none';\n      document.body.appendChild(iframe);\n    }\n    setTimeout(function() {\n      dc.send();\n    }, 0);\n  }\n};\n","/*\n * JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * http://www.opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\n\n/* global unescape, module */\n\n(function () {\n  /*\n  * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n  * to work around bugs in some JS interpreters.\n  */\n  function safe_add (x, y) {\n    var lsw = (x & 0xFFFF) + (y & 0xFFFF);\n    var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n    return (msw << 16) | (lsw & 0xFFFF);\n  }\n\n  /*\n  * Bitwise rotate a 32-bit number to the left.\n  */\n  function bit_rol (num, cnt) {\n    return (num << cnt) | (num >>> (32 - cnt));\n  }\n\n  /*\n  * These functions implement the four basic operations the algorithm uses.\n  */\n  function md5_cmn (q, a, b, x, s, t) {\n    return safe_add(bit_rol(safe_add(safe_add(a, q), safe_add(x, t)), s), b);\n  }\n  function md5_ff (a, b, c, d, x, s, t) {\n    return md5_cmn((b & c) | ((~b) & d), a, b, x, s, t);\n  }\n  function md5_gg (a, b, c, d, x, s, t) {\n    return md5_cmn((b & d) | (c & (~d)), a, b, x, s, t);\n  }\n  function md5_hh (a, b, c, d, x, s, t) {\n    return md5_cmn(b ^ c ^ d, a, b, x, s, t);\n  }\n  function md5_ii (a, b, c, d, x, s, t) {\n    return md5_cmn(c ^ (b | (~d)), a, b, x, s, t);\n  }\n\n  /*\n  * Calculate the MD5 of an array of little-endian words, and a bit length.\n  */\n  function binl_md5 (x, len) {\n    /* append padding */\n    x[len >> 5] |= 0x80 << (len % 32);\n    x[(((len + 64) >>> 9) << 4) + 14] = len;\n\n    var i;\n    var olda;\n    var oldb;\n    var oldc;\n    var oldd;\n    var a = 1732584193;\n    var b = -271733879;\n    var c = -1732584194;\n    var d = 271733878;\n\n    for (i = 0; i < x.length; i += 16) {\n      olda = a;\n      oldb = b;\n      oldc = c;\n      oldd = d;\n\n      a = md5_ff(a, b, c, d, x[i], 7, -680876936);\n      d = md5_ff(d, a, b, c, x[i + 1], 12, -389564586);\n      c = md5_ff(c, d, a, b, x[i + 2], 17, 606105819);\n      b = md5_ff(b, c, d, a, x[i + 3], 22, -1044525330);\n      a = md5_ff(a, b, c, d, x[i + 4], 7, -176418897);\n      d = md5_ff(d, a, b, c, x[i + 5], 12, 1200080426);\n      c = md5_ff(c, d, a, b, x[i + 6], 17, -1473231341);\n      b = md5_ff(b, c, d, a, x[i + 7], 22, -45705983);\n      a = md5_ff(a, b, c, d, x[i + 8], 7, 1770035416);\n      d = md5_ff(d, a, b, c, x[i + 9], 12, -1958414417);\n      c = md5_ff(c, d, a, b, x[i + 10], 17, -42063);\n      b = md5_ff(b, c, d, a, x[i + 11], 22, -1990404162);\n      a = md5_ff(a, b, c, d, x[i + 12], 7, 1804603682);\n      d = md5_ff(d, a, b, c, x[i + 13], 12, -40341101);\n      c = md5_ff(c, d, a, b, x[i + 14], 17, -1502002290);\n      b = md5_ff(b, c, d, a, x[i + 15], 22, 1236535329);\n\n      a = md5_gg(a, b, c, d, x[i + 1], 5, -165796510);\n      d = md5_gg(d, a, b, c, x[i + 6], 9, -1069501632);\n      c = md5_gg(c, d, a, b, x[i + 11], 14, 643717713);\n      b = md5_gg(b, c, d, a, x[i], 20, -373897302);\n      a = md5_gg(a, b, c, d, x[i + 5], 5, -701558691);\n      d = md5_gg(d, a, b, c, x[i + 10], 9, 38016083);\n      c = md5_gg(c, d, a, b, x[i + 15], 14, -660478335);\n      b = md5_gg(b, c, d, a, x[i + 4], 20, -405537848);\n      a = md5_gg(a, b, c, d, x[i + 9], 5, 568446438);\n      d = md5_gg(d, a, b, c, x[i + 14], 9, -1019803690);\n      c = md5_gg(c, d, a, b, x[i + 3], 14, -187363961);\n      b = md5_gg(b, c, d, a, x[i + 8], 20, 1163531501);\n      a = md5_gg(a, b, c, d, x[i + 13], 5, -1444681467);\n      d = md5_gg(d, a, b, c, x[i + 2], 9, -51403784);\n      c = md5_gg(c, d, a, b, x[i + 7], 14, 1735328473);\n      b = md5_gg(b, c, d, a, x[i + 12], 20, -1926607734);\n\n      a = md5_hh(a, b, c, d, x[i + 5], 4, -378558);\n      d = md5_hh(d, a, b, c, x[i + 8], 11, -2022574463);\n      c = md5_hh(c, d, a, b, x[i + 11], 16, 1839030562);\n      b = md5_hh(b, c, d, a, x[i + 14], 23, -35309556);\n      a = md5_hh(a, b, c, d, x[i + 1], 4, -1530992060);\n      d = md5_hh(d, a, b, c, x[i + 4], 11, 1272893353);\n      c = md5_hh(c, d, a, b, x[i + 7], 16, -155497632);\n      b = md5_hh(b, c, d, a, x[i + 10], 23, -1094730640);\n      a = md5_hh(a, b, c, d, x[i + 13], 4, 681279174);\n      d = md5_hh(d, a, b, c, x[i], 11, -358537222);\n      c = md5_hh(c, d, a, b, x[i + 3], 16, -722521979);\n      b = md5_hh(b, c, d, a, x[i + 6], 23, 76029189);\n      a = md5_hh(a, b, c, d, x[i + 9], 4, -640364487);\n      d = md5_hh(d, a, b, c, x[i + 12], 11, -421815835);\n      c = md5_hh(c, d, a, b, x[i + 15], 16, 530742520);\n      b = md5_hh(b, c, d, a, x[i + 2], 23, -995338651);\n\n      a = md5_ii(a, b, c, d, x[i], 6, -198630844);\n      d = md5_ii(d, a, b, c, x[i + 7], 10, 1126891415);\n      c = md5_ii(c, d, a, b, x[i + 14], 15, -1416354905);\n      b = md5_ii(b, c, d, a, x[i + 5], 21, -57434055);\n      a = md5_ii(a, b, c, d, x[i + 12], 6, 1700485571);\n      d = md5_ii(d, a, b, c, x[i + 3], 10, -1894986606);\n      c = md5_ii(c, d, a, b, x[i + 10], 15, -1051523);\n      b = md5_ii(b, c, d, a, x[i + 1], 21, -2054922799);\n      a = md5_ii(a, b, c, d, x[i + 8], 6, 1873313359);\n      d = md5_ii(d, a, b, c, x[i + 15], 10, -30611744);\n      c = md5_ii(c, d, a, b, x[i + 6], 15, -1560198380);\n      b = md5_ii(b, c, d, a, x[i + 13], 21, 1309151649);\n      a = md5_ii(a, b, c, d, x[i + 4], 6, -145523070);\n      d = md5_ii(d, a, b, c, x[i + 11], 10, -1120210379);\n      c = md5_ii(c, d, a, b, x[i + 2], 15, 718787259);\n      b = md5_ii(b, c, d, a, x[i + 9], 21, -343485551);\n\n      a = safe_add(a, olda);\n      b = safe_add(b, oldb);\n      c = safe_add(c, oldc);\n      d = safe_add(d, oldd);\n    }\n    return [a, b, c, d];\n  }\n\n  /*\n  * Convert an array of little-endian words to a string\n  */\n  function binl2rstr (input) {\n    var i;\n    var output = '';\n    for (i = 0; i < input.length * 32; i += 8) {\n      output += String.fromCharCode((input[i >> 5] >>> (i % 32)) & 0xFF);\n    }\n    return output;\n  }\n\n  /*\n  * Convert a raw string to an array of little-endian words\n  * Characters >255 have their high-byte silently ignored.\n  */\n  function rstr2binl (input) {\n    var i;\n    var output = [];\n    output[(input.length >> 2) - 1] = undefined;\n    for (i = 0; i < output.length; i += 1) {\n      output[i] = 0;\n    }\n    for (i = 0; i < input.length * 8; i += 8) {\n      output[i >> 5] |= (input.charCodeAt(i / 8) & 0xFF) << (i % 32);\n    }\n    return output;\n  }\n\n  /*\n  * Calculate the MD5 of a raw string\n  */\n  function rstr_md5 (s) {\n    return binl2rstr(binl_md5(rstr2binl(s), s.length * 8));\n  }\n\n  /*\n  * Calculate the HMAC-MD5, of a key and some data (raw strings)\n  */\n  function rstr_hmac_md5 (key, data) {\n    var i;\n    var bkey = rstr2binl(key);\n    var ipad = [];\n    var opad = [];\n    var hash;\n    ipad[15] = opad[15] = undefined;\n    if (bkey.length > 16) {\n      bkey = binl_md5(bkey, key.length * 8);\n    }\n    for (i = 0; i < 16; i += 1) {\n      ipad[i] = bkey[i] ^ 0x36363636;\n      opad[i] = bkey[i] ^ 0x5C5C5C5C;\n    }\n    hash = binl_md5(ipad.concat(rstr2binl(data)), 512 + data.length * 8);\n    return binl2rstr(binl_md5(opad.concat(hash), 512 + 128));\n  }\n\n  /*\n  * Convert a raw string to a hex string\n  */\n  function rstr2hex (input) {\n    var hex_tab = '0123456789abcdef';\n    var output = '';\n    var x;\n    var i;\n    for (i = 0; i < input.length; i += 1) {\n      x = input.charCodeAt(i);\n      output += hex_tab.charAt((x >>> 4) & 0x0F) +\n      hex_tab.charAt(x & 0x0F);\n    }\n    return output;\n  }\n\n  /*\n  * Encode a string as utf-8\n  */\n  function str2rstr_utf8 (input) {\n    return unescape(encodeURIComponent(input));\n  }\n\n  /*\n  * Take string arguments and return either raw or hex encoded strings\n  */\n  function raw_md5 (s) {\n    return rstr_md5(str2rstr_utf8(s));\n  }\n  function hex_md5 (s) {\n    return rstr2hex(raw_md5(s));\n  }\n  function raw_hmac_md5 (k, d) {\n    return rstr_hmac_md5(str2rstr_utf8(k), str2rstr_utf8(d));\n  }\n  function hex_hmac_md5 (k, d) {\n    return rstr2hex(raw_hmac_md5(k, d));\n  }\n\n  function md5 (string, key, raw) {\n    if (!key) {\n      if (!raw) {\n        return hex_md5(string);\n      }\n      return raw_md5(string);\n    }\n    if (!raw) {\n      return hex_hmac_md5(key, string);\n    }\n    return raw_hmac_md5(key, string);\n  }\n\n  module.exports = md5;\n}());\n","var version = require('./version').v;\nvar testmode = require('./testmode');\nvar callbacks = require('./callbacks');\nvar mods = require('./mods');\nvar stash = require('./stash');\nvar dc = require('./collection');\n\nvar hasOwn = {}.hasOwnProperty;\nvar PingppSDK = function() {\n  require('./init').init();\n};\n\nPingppSDK.prototype = {\n\n  version: version,\n\n  createPayment: function(chargeJSON, callback, signature, debug) {\n    if (typeof callback === 'function') {\n      callbacks.userCallback = callback;\n    }\n    var charge;\n    if (typeof chargeJSON === 'string') {\n      try {\n        charge = JSON.parse(chargeJSON);\n      } catch (err) {\n        callbacks.innerCallback('fail',\n          callbacks.error('json_decode_fail', err));\n        return;\n      }\n    } else {\n      charge = chargeJSON;\n    }\n    if (typeof charge === 'undefined') {\n      callbacks.innerCallback('fail', callbacks.error('json_decode_fail'));\n      return;\n    }\n    if (!hasOwn.call(charge, 'id')) {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_charge', 'no_charge_id'));\n      return;\n    }\n    if (!hasOwn.call(charge, 'channel')) {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_charge', 'no_channel'));\n      return;\n    }\n    if (hasOwn.call(charge, 'app')) {\n      if (typeof charge.app === 'string') {\n        stash.app_id = charge.app;\n      } else if (typeof charge.app === 'object' &&\n        typeof charge.app.id === 'string') {\n        stash.app_id = charge.app.id;\n      }\n    }\n    dc.report({\n      type: 'pure_sdk_click',\n      channel: charge.channel,\n      ch_id: charge.id\n    });\n    var channel = charge.channel;\n    if (!hasOwn.call(charge, 'credential')) {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_charge', 'no_credential'));\n      return;\n    }\n    if (!charge.credential) {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_credential', 'credential_is_undefined'));\n      return;\n    }\n    if (!hasOwn.call(charge.credential, channel)) {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_credential', 'credential_is_incorrect'));\n      return;\n    }\n    if (!hasOwn.call(charge, 'livemode')) {\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_charge', 'no_livemode_field'));\n      return;\n    }\n    var channelModule = mods.getChannelModule(channel);\n    if (typeof channelModule === 'undefined') {\n      console.error('channel module \"' + channel + '\" is undefined');\n      callbacks.innerCallback('fail',\n        callbacks.error('invalid_channel',\n          'channel module \"' + channel + '\" is undefined')\n      );\n      return;\n    }\n    if (charge.livemode === false) {\n      if (hasOwn.call(channelModule, 'runTestMode')) {\n        channelModule.runTestMode(charge);\n      } else {\n        testmode.runTestMode(charge);\n      }\n      return;\n    }\n\n    if (typeof signature != 'undefined') {\n      stash.signature = signature;\n    }\n    if (typeof debug == 'boolean') {\n      stash.debug = debug;\n    }\n    channelModule.handleCharge(charge);\n  },\n\n  setAPURL: function(url) {\n    stash.APURL = url;\n  }\n};\n\nmodule.exports = new PingppSDK();\n","var hasOwn = {}.hasOwnProperty;\nvar mods = {};\nmodule.exports = mods;\n\nmods.channels = {\n  alipay_pc_direct: require('./channels/alipay_pc_direct'),\n  alipay_wap: require('./channels/alipay_wap'),\n  bfb_wap: require('./channels/bfb_wap'),\n  cp_b2b: require('./channels/cp_b2b'),\n  fqlpay_qr: require('./channels/fqlpay_qr'),\n  fqlpay_wap: require('./channels/fqlpay_wap'),\n  jdpay_wap: require('./channels/jdpay_wap'),\n  upacp_pc: require('./channels/upacp_pc'),\n  upacp_wap: require('./channels/upacp_wap'),\n  wx_pub: require('./channels/wx_pub'),\n  wx_wap: require('./channels/wx_wap'),\n  yeepay_wap: require('./channels/yeepay_wap')\n};\n\nmods.extras = {\n  ap: require('./channels/extras/ap')\n};\n\nmods.getChannelModule = function(channel) {\n  if (hasOwn.call(mods.channels, channel)) {\n    return mods.channels[channel];\n  }\n  return undefined;\n};\n\nmods.getExtraModule = function(name) {\n  if (hasOwn.call(mods.extras, name)) {\n    return mods.extras[name];\n  }\n  return undefined;\n};\n","module.exports = {\n};\n","var utils = require('./utils');\nvar hasOwn = {}.hasOwnProperty;\n\nmodule.exports = {\n\n  PINGPP_MOCK_URL: 'http://sissi.pingxx.com/mock.php',\n\n  runTestMode: function(charge) {\n    var params = {\n      'ch_id': charge.id,\n      'scheme': 'http',\n      'channel': charge.channel\n    };\n    if (hasOwn.call(charge, 'order_no')) {\n      params.order_no = charge.order_no;\n    } else if (hasOwn.call(charge, 'orderNo')) {\n      params.order_no = charge.orderNo;\n    }\n    if (hasOwn.call(charge, 'time_expire')) {\n      params.time_expire = charge.time_expire;\n    } else if (hasOwn.call(charge, 'timeExpire')) {\n      params.time_expire = charge.timeExpire;\n    }\n    if (hasOwn.call(charge, 'extra')) {\n      params.extra = encodeURIComponent(JSON.stringify(charge.extra));\n    }\n    utils.redirectTo(this.PINGPP_MOCK_URL + '?' + utils.stringifyData(params));\n  }\n};\n","var hasOwn = {}.hasOwnProperty;\n\nvar utils = module.exports = {\n\n  /**\n   * 对象转换成 query string\n   * @param object data  待转对象\n   * @param string channel  渠道\n   * @param boolean urlencode  是否需要 urlencode\n   *\n   * @return string query string\n   */\n  stringifyData: function(data, channel, urlencode) {\n    if (typeof urlencode == 'undefined') {\n      urlencode = false;\n    }\n    var output = [];\n    for (var i in data) {\n      if (!hasOwn.call(data, i) || typeof data[i] === 'function') {\n        continue;\n      }\n      if (channel == 'bfb_wap' && i == 'url') {\n        continue;\n      }\n      if (channel == 'yeepay_wap' && i == 'mode') {\n        continue;\n      }\n      if (i == 'channel_url') {\n        continue;\n      }\n      output.push(i + '=' +\n        (urlencode ? encodeURIComponent(data[i]) : data[i]));\n    }\n    return output.join('&');\n  },\n\n  /**\n   * 网络请求\n   * @param string url\n   * @param string method  请求方式, POST, GET ...\n   * @param object requestData  请求数据\n   * @param function successCallback  成功回调 (data, statusCode, xhr)\n   * @param function errorCallback  错误回调 (xhr, statusCode, error)\n   */\n  request: function(url, method, requestData,\n    successCallback, errorCallback, headers) {\n    if (typeof XMLHttpRequest !== 'function') {\n      console.log('Function XMLHttpRequest is undefined.');\n      return;\n    }\n    var xhr = new XMLHttpRequest();\n    if (typeof xhr.timeout !== 'undefined') {\n      xhr.timeout = 6000;\n    }\n    method = method.toUpperCase();\n\n    if (method === 'GET' && typeof requestData === 'object' && requestData) {\n      url += '?' + utils.stringifyData(requestData, '', true);\n    }\n    xhr.open(method, url, true);\n    if (typeof headers !== 'undefined') {\n      for (var k in headers) {\n        if (hasOwn.call(headers, k)) {\n          xhr.setRequestHeader(k, headers[k]);\n        }\n      }\n    }\n    if (method === 'POST') {\n      xhr.setRequestHeader('Content-type', 'application/json; charset=utf-8');\n      xhr.send(JSON.stringify(requestData));\n    } else {\n      xhr.send();\n    }\n    if (typeof successCallback == 'undefined') {\n      successCallback = function() {};\n    }\n    if (typeof errorCallback == 'undefined') {\n      errorCallback = function() {};\n    }\n    xhr.onreadystatechange = function() {\n      if (xhr.readyState == 4) {\n        successCallback(xhr.responseText, xhr.status, xhr);\n      }\n    };\n    xhr.onerror = function(e) {\n      errorCallback(xhr, 0, e);\n    };\n  },\n\n  /**\n   * 表单提交\n   * @param string url\n   * @param string method  请求方式, POST, GET ...\n   * @param object params  请求数据\n   */\n  formSubmit: function(url, method, params) {\n    if (typeof window === 'undefined') {\n      console.log('Not a browser, form submit url: ' + url);\n      return;\n    }\n    var form = document.createElement('form');\n    form.setAttribute('method', method);\n    form.setAttribute('action', url);\n\n    for (var key in params) {\n      if (hasOwn.call(params, key)) {\n        var hiddenField = document.createElement('input');\n        hiddenField.setAttribute('type', 'hidden');\n        hiddenField.setAttribute('name', key);\n        hiddenField.setAttribute('value', params[key]);\n        form.appendChild(hiddenField);\n      }\n    }\n\n    document.body.appendChild(form);\n    form.submit();\n  },\n\n  randomString: function(length) {\n    if (typeof length == 'undefined') {\n      length = 32;\n    }\n    var chars =\n      'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n    var maxPos = chars.length;\n    var str = '';\n    for (var i = 0; i < length; i++) {\n      str += chars.charAt(Math.floor(Math.random() * maxPos));\n    }\n\n    return str;\n  },\n\n  redirectTo: function(url) {\n    if (typeof window === 'undefined') {\n      console.log('Not a browser, redirect url: ' + url);\n      return;\n    }\n    window.location.href = url;\n  },\n\n  inWeixin: function() {\n    if (typeof navigator === 'undefined') {\n      return false;\n    }\n    var ua = navigator.userAgent.toLowerCase();\n    return ua.indexOf('micromessenger') !== -1;\n  },\n\n  documentReady: function(fn) {\n    if (typeof document === 'undefined') {\n      fn();\n      return;\n    }\n    if (document.readyState != 'loading'){\n      fn();\n    } else {\n      document.addEventListener('DOMContentLoaded', fn);\n    }\n  }\n};\n","module.exports = {\n  v: '2.1.2'\n};\n"]}